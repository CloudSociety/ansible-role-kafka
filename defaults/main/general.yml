# # SPDX-License-Identifier: GPL-3.0-only
# Copyright (C) 2025 Cloud Society Org.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 3,
# as published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

---
kafka_install:
  method: "package" # only 'package' installation is supported for now
  version: 7.9.0
  group: "kafka"
  user: "kafka"
  user_login_shell: "/sbin/nologin"
  rhl_java_package_name: "java-17-openjdk" # java-8-openjdk or java-11-openjdk or java-17-openjdk
  broker_pkgs:
    - "confluent-common"
    - "confluent-kafka"
    - "confluent-rebalancer"
  controller_pkgs:
    - "confluent-common"
    - "confluent-kafka"

kafka_files:
  server_conf: "/etc/kafka/server.properties"
  log4j_conf: "/etc/kafka/log4j.properties"
  server_start: "/bin/kafka-server-start"
  systemd_service: "/lib/systemd/system/confluent-kafka.service"

# `__this` is used for the value of item itself (not its children)
kafka_logging:
  dir: "/var/log/confluent"
  custom_log4j:
    enabled: true
    properties:
      logger:
        kafka:
          __this: "INFO"
          request:
            logger: "WARN, requestAppender"
          network:
            RequestChannel: "WARN, requestAppender"
          log:
            LogCleaner: "INFO, cleanerAppender"
          authorizer:
            logger: "INFO, authorizerAppender"
        org:
          apache:
            kafka:
              controller: "INFO, controllerAppender"
        state:
          change:
            logger: "INFO, stateChangeAppender"
      additivity:
        kafka:
          request:
            logger: false
          log:
            LogCleaner: false
          network:
            RequestChannel: false
          authorizer:
            logger: false
        org:
          apache:
            kafka:
              __this: "INFO"
              controller: false
        state:
          change:
            logger: false
      appender:
        stdout:
          __this: "org.apache.log4j.ConsoleAppender"
          layout:
            __this: "org.apache.log4j.PatternLayout"
            ConversionPattern: "[%d] %p %m (%c)%n"
        stateChangeAppender:
          __this: "org.apache.log4j.RollingFileAppender"
          File: "${kafka.logs.dir}/state-change.log"
          layout:
            __this: "org.apache.log4j.PatternLayout"
            ConversionPattern: "[%d] %p %m (%c)%n"
        requestAppender:
          __this: "org.apache.log4j.RollingFileAppender"
          File: "${kafka.logs.dir}/kafka-request.log"
          layout:
            __this: "layout=org.apache.log4j.PatternLayout"
            ConversionPattern: "[%d] %p %m (%c)%n"
        cleanerAppender:
          __this: "org.apache.log4j.RollingFileAppender"
          File: "${kafka.logs.dir}/log-cleaner.log"
          layout:
            __this: "org.apache.log4j.PatternLayout"
            ConversionPattern: "[%d] %p %m (%c)%n"
        controllerAppender:
          __this: "org.apache.log4j.RollingFileAppender"
          File: "${kafka.logs.dir}/controller.log"
          layout:
            __this: "org.apache.log4j.PatternLayout"
            ConversionPattern: "[%d] %p %m (%c)%n"
        authorizerAppender:
          __this: "org.apache.log4j.RollingFileAppender"
          File: "${kafka.logs.dir}/kafka-authorizer.log"
          layout:
            __this: "org.apache.log4j.PatternLayout"
            ConversionPattern: "[%d] %p %m (%c)%n"